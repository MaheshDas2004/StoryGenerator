{% extends "base.html" %} {% block content %}
<body class="bg-[#0b0e16] text-white min-h-screen font-playful">
  <main class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-12">
    <div class="text-center mb-12">
      <h2 class="text-4xl sm:text-5xl font-bold mb-4">
        <span class="text-white">Create</span>
        <span class="text-[#f97316]"> Amazing </span>
        <span class="text-white">Stories </span>
        <span class="text-[#14b8a6]">with AI</span>
      </h2>
      <p class="text-lg sm:text-xl text-gray-300 max-w-2xl mx-auto">
        Enter your dream adventure details below, and let AI weave magic!
      </p>
    </div>

    <div class="grid grid-cols-1 xl:grid-cols-5 gap-8">
      <!-- Left Form -->
      <div class="xl:col-span-2">
        <div
          class="bg-[#1a1f2b] rounded-3xl p-6 shadow-lg border border-gray-700/50 backdrop-blur-md"
        >
          <form id="storyForm" method="POST" class="space-y-6">
            {% csrf_token %}

            <!-- Character Name -->
            <div>
              <label class="block text-sm text-orange-400 mb-1.5"
                >Main Character Name</label
              >
              <input
                type="text"
                name="characterName"
                placeholder="Eg: Aria or Leo"
                class="w-full px-4 py-2.5 bg-[#0e121c] border border-gray-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#B84443]"
              />
            </div>

            <!-- Age Range -->
            <div>
              <h3 class="text-sm text-pink-400 mb-2">Character Age</h3>
              <div class="flex gap-3">
                <label
                  class="flex-1 text-center border border-gray-700 rounded-lg py-2 bg-[#151b29] hover:bg-[#1f273b] cursor-pointer transition"
                >
                  <input type="radio" name="age" value="5-7" class="sr-only" />
                  <span class="text-sm block text-white">5-7</span>
                </label>
                <label
                  class="flex-1 text-center border border-gray-700 rounded-lg py-2 bg-[#151b29] hover:bg-[#1f273b] cursor-pointer transition"
                >
                  <input type="radio" name="age" value="8-10" class="sr-only" />
                  <span class="text-sm block text-white">8-10</span>
                </label>
                <label
                  class="flex-1 text-center border border-gray-700 rounded-lg py-2 bg-[#151b29] hover:bg-[#1f273b] cursor-pointer transition"
                >
                  <input
                    type="radio"
                    name="age"
                    value="11-13"
                    class="sr-only"
                  />
                  <span class="text-sm block text-white">11-13</span>
                </label>
              </div>
            </div>

            <!-- Genre -->
            <div>
              <h3 class="text-sm text-purple-400 mb-2">Story Genre</h3>
              <div class="grid grid-cols-2 gap-3">
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="genre"
                    value="fantasy"
                    class="sr-only"
                  />
                  <span>🧚 Fantasy</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="genre"
                    value="adventure"
                    class="sr-only"
                  />
                  <span>🏞️ Adventure</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="genre"
                    value="sci-fi"
                    class="sr-only"
                  />
                  <span>👽 Sci-fi</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="genre"
                    value="mystery"
                    class="sr-only"
                  />
                  <span>🕵️ Mystery</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="genre"
                    value="funny"
                    class="sr-only"
                  />
                  <span>😂 Funny</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="genre"
                    value="educational"
                    class="sr-only"
                  />
                  <span>📘 Educational</span>
                </label>
              </div>
            </div>

            <!-- Setting -->
            <div>
              <h3 class="text-sm text-yellow-400 mb-2">Story Setting</h3>
              <div class="grid grid-cols-2 gap-2">
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="setting"
                    value="magical-forest"
                    class="sr-only"
                  />
                  <span>🌲 Magical forest</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="setting"
                    value="enchanted-castle"
                    class="sr-only"
                  />
                  <span>🏰 Enchanted castle</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="setting"
                    value="underwater-kingdom"
                    class="sr-only"
                  />
                  <span>🌊 Underwater kingdom</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="setting"
                    value="space-station"
                    class="sr-only"
                  />
                  <span>🛸 Space station</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="setting"
                    value="haunted-mansion"
                    class="sr-only"
                  />
                  <span>🏚️ Haunted mansion</span>
                </label>
              </div>
            </div>

            <!-- Length -->
            <div>
              <h3 class="text-sm text-teal-400 mb-2">Story Length</h3>
              <div class="space-y-2">
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="length"
                    value="short"
                    class="sr-only"
                  />
                  <span>Short (5-10 mins)</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="length"
                    value="medium"
                    class="sr-only"
                  />
                  <span>Medium (10-15 mins)</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="radio"
                    name="length"
                    value="long"
                    class="sr-only"
                  />
                  <span>Long (15-20 mins)</span>
                </label>
              </div>
            </div>

            <!-- Special Elements -->
            <div>
              <h3 class="text-sm text-pink-400 mb-2">Special Elements</h3>
              <div class="grid grid-cols-2 gap-2">
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="elements"
                    value="talking-animals"
                    class="sr-only"
                  />
                  <span>🐾 Talking animals</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="elements"
                    value="magic-powers"
                    class="sr-only"
                  />
                  <span>⚡ Magic powers</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="elements"
                    value="treasure-hunt"
                    class="sr-only"
                  />
                  <span>💎 Treasure hunt</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="elements"
                    value="time-travel"
                    class="sr-only"
                  />
                  <span>⏰ Time travel</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="elements"
                    value="dragons"
                    class="sr-only"
                  />
                  <span>🐉 Dragons</span>
                </label>
                <label
                  class="flex items-center space-x-2 border border-gray-700 rounded-xl p-2 bg-[#151b29] hover:bg-[#1f273b] transition cursor-pointer"
                >
                  <input
                    type="checkbox"
                    name="elements"
                    value="robots"
                    class="sr-only"
                  />
                  <span>🤖 Robots</span>
                </label>
              </div>
            </div>

            <!-- Notes -->
            <div>
              <label class="text-purple-300 block mb-1.5"
                >Additional Notes</label
              >
              <textarea
                rows="3"
                name="additionalNotes"
                placeholder="Tell us anything else..."
                class="w-full px-4 py-2.5 bg-[#0e121c] border border-gray-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-400 resize-none"
              ></textarea>
            </div>

            <!-- Generate Button -->
            <button
              type="submit"
              class="w-full bg-gradient-to-r from-[#f97316] via-[#ec4899] to-[#8b5cf6] text-white font-bold py-3 rounded-xl text-lg shadow-md hover:scale-105 transition-all"
            >
              ✨ Generate My Story ✨
            </button>
          </form>
        </div>
      </div>

      <!-- Right Output -->
      <div class="xl:col-span-3">
        <div
          class="bg-[#1a1f2b] border border-gray-700 rounded-3xl shadow-xl h-full flex flex-col"
        >
          <div class="p-6 border-b border-gray-700 text-center">
            <h3 class="text-2xl font-bold text-orange-400">
              📖 Your Magical Story
            </h3>
          </div>
          <div class="flex-1 p-6 overflow-y-auto">
            <div
              class="bg-[#0e121c] p-6 rounded-xl border border-gray-700 h-full min-h-[400px]"
            >
              {% if story %}
              <div class="space-y-4 text-white leading-relaxed">
                {% for paragraph in story.splitlines %} {% if paragraph.strip %}
                <p>{{ paragraph }}</p>
                {% endif %} {% endfor %}
              </div>
              {% else %}
              <div class="text-center text-gray-500">
                <div class="text-5xl mb-4 animate-bounce">📚</div>
                <p class="text-lg">No story yet. Fill the form to begin!</p>
              </div>
              {% endif %}
            </div>
          </div>
          <div
            class="p-6 border-t border-gray-700 flex flex-col sm:flex-row gap-4"
          >
            <button
              id="saveStory"
              {%
              if
              not
              story
              %}disabled{%
              endif
              %}
              class="flex-1 bg-teal-600 hover:bg-teal-500 px-4 py-3 rounded-lg text-white font-bold transition disabled:bg-gray-600"
            >
              💾 Save
            </button>
            <button
              id="shareStory"
              {%
              if
              not
              story
              %}disabled{%
              endif
              %}
              class="flex-1 bg-purple-600 hover:bg-purple-500 px-4 py-3 rounded-lg text-white font-bold transition disabled:bg-gray-600"
            >
              📤 Share
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Add interactive behavior for radio buttons and checkboxes
    document.addEventListener("DOMContentLoaded", function () {
      // Handle radio button selection styling
      const radioLabels = document.querySelectorAll(
        'input[type="radio"] + span'
      );
      const checkboxLabels = document.querySelectorAll(
        'input[type="checkbox"] + span'
      );

      // Radio button functionality
      document.querySelectorAll('input[type="radio"]').forEach((radio) => {
        radio.addEventListener("change", function () {
          // Remove active class from all radio buttons with same name
          document
            .querySelectorAll(`input[name="${this.name}"]`)
            .forEach((r) => {
              r.parentElement.classList.remove(
                "bg-[#B84443]",
                "border-[#B84443]"
              );
              r.parentElement.classList.add("bg-[#151b29]", "border-gray-700");
            });

          // Add active class to selected radio button
          if (this.checked) {
            this.parentElement.classList.remove(
              "bg-[#151b29]",
              "border-gray-700"
            );
            this.parentElement.classList.add(
              "bg-[#B84443]",
              "border-[#B84443]"
            );
          }
        });
      });

      // Checkbox functionality
      document
        .querySelectorAll('input[type="checkbox"]')
        .forEach((checkbox) => {
          checkbox.addEventListener("change", function () {
            if (this.checked) {
              this.parentElement.classList.remove(
                "bg-[#F0625F]",
                "border-gray-700"
              );
              this.parentElement.classList.add(
                "bg-[#B84443]",
                "border-[#B84443]"
              );
            } else {
              this.parentElement.classList.remove(
                "bg-[#B84443]",
                "border-[#B84443]"
              );
              this.parentElement.classList.add(
                "bg-[#151b29]",
                "border-gray-700"
              );
            }
          });
        });
    });
  </script>
</body>
{% endblock %}
